# QUICK FIX COMMANDS - Copy and paste these on your VPS
# Run these commands one by one on your VPS server

# 1. Navigate to backend
cd /var/www/primeacademy_backend

# 2. Install dependencies (if needed)
npm install

# 3. Build the backend
npm run build

# 4. Check if .env exists and has PORT
cat .env | grep PORT || echo "PORT=3001" >> .env

# 5. Stop old PM2 processes
pm2 delete backend-api 2>/dev/null
pm2 delete all 2>/dev/null

# 6. Start backend
pm2 start dist/index.js --name backend-api
pm2 save

# 7. Check status
pm2 list
pm2 logs backend-api --lines 20

# 8. Test backend directly
curl http://localhost:3001/api/health

# 9. Test through nginx
curl https://api.prashantthakar.com/api/health

# 10. If still failing, check logs
pm2 logs backend-api --err
sudo tail -20 /var/log/nginx/api.prashantthakar.com.error.log

